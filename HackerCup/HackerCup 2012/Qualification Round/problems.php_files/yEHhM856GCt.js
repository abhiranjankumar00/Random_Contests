/*1327104327,176833974*/

if (window.CavalryLogger) { CavalryLogger.start_js(["1Onge"]); }

function HackerCupAlertsController(a,b){copy_properties(this,{elem:$(a),round_id:b,timer_id:null});this.start();}copy_properties(HackerCupAlertsController.prototype,{start:function(){if(this.timer_id===null)this._runAlerts();return false;},_runAlerts:function(){var a=new AsyncRequest().setURI('/hackercup/ajax/alerts.php').setData({round_id:this.round_id}).send();this.timer_id=setTimeout(this._runAlerts.bind(this),60000);return false;}});
var DevsiteFixedScrolling=function(){this.menu_top=$('bodyMenu').offsetTop;this.scrollListener=Event.listen(window,'scroll',this._onScroll.bind(this));};copy_properties(DevsiteFixedScrolling.prototype,{_onScroll:function(){var c=Vector2.getScrollPosition().y;var d=Vector2.getViewportDimensions().y;var b=$('bodyMenu').offsetHeight;if(d>b+this.menu_top){CSS.addClass('bodyMenu','fixed');}else{CSS.removeClass('bodyMenu','fixed');if(c>b+this.menu_top-d){var a=$('bodyText').offsetHeight;FixedScrolling.setFixed('bodyMenu');if($('bodyText').offsetHeight<a){CSS.removeClass('bodyMenu','fixed');FixedScrolling.clearFixed('bodyMenu');this.scrollListener.remove();return;}}else FixedScrolling.clearFixed('bodyMenu');}}});
function DevsiteTaskCreatePageController(){}copy_properties(DevsiteTaskCreatePageController,{form:null,alertBox:null,indicator:null,is_dialog:null,init:function(b,a,d,c){this.form=b;this.alertBox=a;this.indicator=d;this.is_dialog=c;},_handleResponse:function(d){CSS.hide(this.indicator);if(d.error_message){var a=null;if(d.error_details.length){var b=[];for(var c=0;c<d.error_details.length;++c)b.push($N('li',null,d.error_details[c]));a=$N('ul',{style:{'text-align':'left'}},b);}DOM.setContent(this.alertBox,$N('div',null,[$N('b',null,d.error_message),a]));CSS.show(this.alertBox);Form.setDisabled(this.form.controller,false);}else if(this.is_dialog){Dialog.getCurrent().hide();window.location.reload(true);}else goURI(new URI().setPath('/bugs/'+d.task_id));return false;},onSubmit:function(){this.form.controller.submit.click();if(!this.is_dialog)window.scrollTo(0,0);CSS.hide(this.alertBox);CSS.show(this.indicator);Form.setDisabled(this.form.controller,true);return false;}});
function DevsiteTaskDetailPageController(){}copy_properties(DevsiteTaskDetailPageController,{browseDiv:null,init:function(a){if(!a)return;this.browseDiv=a;KeyEventController.registerKey('LEFT',this.goPrev.bind(this));KeyEventController.registerKey('k',this.goPrev.bind(this));KeyEventController.registerKey('RIGHT',this.goNext.bind(this));KeyEventController.registerKey('j',this.goNext.bind(this));},goPrev:function(){prev_button=DOM.find(this.browseDiv,'.prev');if(prev_button.href)goURI(prev_button.href);},goNext:function(){next_button=DOM.find(this.browseDiv,'.next');if(next_button.href)goURI(next_button.href);}});
function DevsiteTasksNavigationController(){}copy_properties(DevsiteTasksNavigationController,{indicator:null,typeahead:null,search_view:null,search_ids:[],search_statuses:[],search_texts:[],disableChange:false,init:function(a,f,e,b,c,d){this.indicator=a;this.typeahead=f;this.search_view=e;this.search_ids=b;this.search_statuses=c;this.search_texts=d;f.getData().bootstrap();HistoryManager.init().registerURIHandler(function(g){go_or_replace(window.location,g,true);});},goPresetSearch:function(b){if(this.disableChange)return;this.busy();this.clearSearch();this.search_view=b;var a={search_view:b};this._goAsyncRequest('/ajax/bugs/preset_search',a,true);},goSort:function(a){this.busy();var b={search_view:this.search_view,search_ids:this.search_ids,search_statuses:this.search_statuses,search_texts:this.search_texts,sort:Selector.getValue(a.selector)};this._goAsyncRequest('/ajax/bugs/sort',b);},_goSearch:function(){this.busy();this.search_view='search';var a={search_view:this.search_view,search_ids:this.search_ids,search_statuses:this.search_statuses,search_texts:this.search_texts};this._goAsyncRequest('ajax/bugs/search',a,true);},_goAsyncRequest:function(a,b,c){if(c){qualified_uri=new URI('/bugs').setQueryData(b).getQualifiedURI();HistoryManager.go(qualified_uri.toString(),false);}new AsyncRequest().setURI(a).setData(b).setHandler(this.idle.bind(this)).send();},goCleanSearch:function(){if(this.disableChange)return;this.clearSearch();this._goSearch();},clearSearch:function(){this.search_ids=[];this.search_texts=[];this.search_statuses=['open'];this.typeahead.getCore().setExclusions([]);},busy:function(){this.disableChange=true;CSS.show(this.indicator);},idle:function(){CSS.hide(this.indicator);this.disableChange=false;},toggleStatus:function(b,a){if(this.disableChange)return;Form.setDisabled(a.parentNode.parentNode.parentNode,true);if(this.search_statuses.indexOf(b)==-1){this.addStatus(b);}else this.removeStatus(b);},_addSearchGeneric:function(b,a){if(this.disableChange)return;if(a.indexOf(b)==-1){a.push(b);this._goSearch();}},_removeSearchGeneric:function(b,a){if(this.disableChange)return;if((index=a.indexOf(b))!==-1){a.splice(index,1);this._goSearch();}},addTextSearch:function(a){return this._addSearchGeneric(a.toLowerCase(),this.search_texts);},removeTextSearch:function(a){return this._removeSearchGeneric(a,this.search_texts);},addSearch:function(a){return this._addSearchGeneric(a,this.search_ids);},removeSearch:function(a){return this._removeSearchGeneric(a,this.search_ids);},addStatus:function(a){return this._addSearchGeneric(a,this.search_statuses);},removeStatus:function(a){return this._removeSearchGeneric(a,this.search_statuses);},setAllowedTypeaheadIDs:function(a){var c=[];var b;for(b in this.typeahead.getData().getAllEntries())c.push(b);for(b in a)if((index=c.indexOf(b))!==-1)c.splice(index,1);this.typeahead.getCore().setExclusions(c);},listenSortSelector:function(a){Selector.listen(a,'change',this.goSort.bind(this));},listenRemoveButton:function(a,c,b){Event.listen(DOM.find(a,'.uiCloseButton'),'click',function(){if(b){this.removeTextSearch(c);}else this.removeSearch(c);DOM.remove(a);}.bind(this));}});add_properties('TypeaheadBehaviors',{TaskSearchBehavior:function(c){var a=c.getCore();var b=c.getData();c.subscribe('select',function(){var e=a.getHiddenValue();if(!e){DevsiteTasksNavigationController.addTextSearch(a.getValue());}else{var d=b.getEntry(e);if(d.type==='Task'){window.location=d.path;}else DevsiteTasksNavigationController.addSearch(e);}a.reset();});}});function TaskSearchTypeaheadView(a,b){this.parent.construct(this,a,b);}Class.extend(TaskSearchTypeaheadView,'ContextualTypeaheadView');TaskSearchTypeaheadView.prototype={render:function(d,b,c){if(d){var a=$N('li',{className:'calltoaction'},[$N('span',{className:'seeMore'},['Search for text "'+d+'"',$N('span',{className:'arrow'})])]);b.push({mark:'see_more',text:d,node:a});}return this.parent.render(d,b,c);},renderer:function(b){var a=[];if(b.type=='Task'){a.push($N('span',{className:'titleEntry fwb'},[b.text]));}else a.push($N('span',{className:'fwb'},[b.type+': ']),b.text);var c=$N('li',{className:b.type},[$N('span',{className:'text'},a)]);return c;},buildResults:function(b){var a=this.parent.buildResults(b);CSS.addClass(a,'basic');return a;}};
function UIDataTableController(){}UIDataTableController.prototype={selectedRow:null,selectionEnabled:true,init:function(a){this.args=a;this.selectedRow=this.args.selectedRow;},sortColumn:function(b,a,c){if(this.args.header){CSS.removeClass(this.args.header,'sortedDesc');CSS.removeClass(this.args.header,'sortedAsc');}this.args.order=this.args.column==a?!this.args.order:c;this.args.column=a;this.args.header=b;CSS.addClass(b,this.args.order?'sortedDesc':'sortedAsc');this.args.rows.sort(this._sort.bind(this));body=DOM.find(this.args.table,'tbody');for(i=0;i<this.args.rows.length;i++){row_element=$(this.args.rows[i].element);CSS.conditionClass(row_element,'odd',i%2==1);CSS.conditionClass(row_element,'hidden',i>=this.args.max_visible);DOM.appendContent(body,row_element);}},_sort:function(a,b){valueA=a.sort_values[this.args.column];valueB=b.sort_values[this.args.column];var c=(valueB<valueA)-(valueA<valueB);return (this.args.order?-1:1)*c;},selectRow:function(b,a){if(!this.selectionEnabled)return false;this.deselectRow();this.selectedRow=b;CSS.addClass(b,'selectedRow');for(var c in a)Arbiter.inform(c,a[c]);return true;},deselectRow:function(){if(this.selectedRow)CSS.removeClass(this.selectedRow,'selectedRow');},disableSelection:function(){this.selectionEnabled=false;},enableSelection:function(){this.selectionEnabled=true;}};