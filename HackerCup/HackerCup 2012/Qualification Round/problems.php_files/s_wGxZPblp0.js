/*1327104327,176832694*/

if (window.CavalryLogger) { CavalryLogger.start_js(["5g6UX"]); }

function HackerCupConst(){}copy_properties(HackerCupConst,{START_TIMER:'hackercup_start_timer',SUCCESSFUL_UPLOAD:'successful_upload'});
function PluginConfigurator(){}PluginConfigurator.prototype={init:function(b,a){this.config=b;this.config.code_button=a;for(var m in this.config.params)this.config.params[m].value=this.config.params[m]['default'];var n=$(this.config.form_id);var d=DOM.scry(n,'input');d=d.concat(DOM.scry(n,'textarea'));for(var l in this.config.params){var c=0;if(this.config.params[l].type=='question'){var i='param_'+l+'_link';var j=l+'_link';var h=ge(i);this.config.params[j]={};this.config.params[j].lastShownPollItem=1;this.config.params[j].questionName=l;for(var e=0,g=d.length;e<g;e++)if(d[e].name==l+"poll"+c){c++;this.config.params[d[e].name]={};this.config.params[d[e].name].pollName=l;this.config.params[d[e].name].type='poll';this.config.params[d[e].name].value=this.config.params[l]['default'];}this.config.params[l].questionsCount=c-1;Event.listen(h,'click',this.handleAddLinkClick.bind(this));}}for(var e=0,g=d.length;e<g;e++){this.updateFormElement(d[e]);Event.listen(d[e],'change',this.handleChange.bind(this));}var o=DOM.scry(n,'div.uiSelector');for(var f=0,k=o.length;f<k;f++){this.updateFormElement(o[f]);Selector.listen(o[f],'change',this.handleSelectorChange.bind(this));}Arbiter.subscribe('connect_sdk_loaded',this.renderExample.bind(this));},renderExample:function(){var c=[],k='',d={};var j=false;var m=[];var n;for(var l in this.config.params){var e=this.config.params[l];var p=e.value;var g=e['default'];var h=e.example;var b=e.always_set;var o=e.type;if(p===undefined&&h!==undefined)p=h;if(e.xfbml_name)l=e.xfbml_name;if(o=='question')n=l;if(o=='poll')m.push(p);if(l=='colorscheme'&&p=='dark')j=true;if(p!==undefined&&p!==''&&o!='question'&&o!='poll'&&(b!=null||p!=g||p==h)){l='data-'+l.replace(/_/g,'-');d[l]=p;}}if(m.length!==0)d[n]=JSON.stringify(m);k=DOM.create('div');for(var a in d)if(d.hasOwnProperty(a))k.setAttribute(a,d[a]);k.className=this.config.xfbml.replace(':','-');if(!this.config.example_id)return;var i=$(this.config.example_id);var f=["fb:activity","fb:comments","fb:facepile","fb:like","fb:like-box","fb:recommendations","fb:subscribe"];if(f.contains(this.config.xfbml))CSS.conditionClass(k,'dark_background',j);DOM.setContent(i,k);FB.XFBML.parse(i);},handleAddLinkClick:function(event){var b=event.getTarget();var d=b.name||b.getAttribute('data-name')||b.parentNode.name||b.parentNode.getAttribute('data-name');var a=this.config.params[d].lastShownPollItem;var f=this.config.params[d].questionName;a++;var c=ge('param_'+f+a);if(c!=null){c.type="text";this.config.params[d].lastShownPollItem=a;var e=ge('param_'+f+(a+1));if(e==null){b.parentNode.style.visibility='hidden';b.style.visibility='hidden';}}},handleChange:function(event){var a=event.getTarget();this.updateFormElement(a);this.renderExample();},handleSelectorChange:function(a){this.updateFormElement(a.selector);this.renderExample();},updateFormElement:function(a){var d=a.name||a.getAttribute('data-name');var e=this.config.params[d];if(e.type=='bool'){e.value=a.checked?'true':'false';}else if(e.type=='enum'){var f=Selector.getValue(a);if(!!a.getAttribute('data-multiple')){f=f.filter(function(g){return g.length>0;});f=f.join(',');}e.value=f;}else e.value=a.value;var c=e.value;var b=d;if(e.type=='poll'){b=e.pollName;c=this.handlePollValueChange(d);}query_data={};query_data[b]=c;code_uri=URI(this.config.code_button.href);code_uri.addQueryData(query_data);this.config.code_button.href=code_uri.toString();},handlePollValueChange:function(b){var c=this.config.params[b];var d=c.pollName;var e=[];for(var a=0;a<this.config.params[d].questionsCount;a++){var f=this.config.params[d+'poll'+a].value;if(f!=='')e.push(f);}return FB.JSON.stringify(e);}};PluginConfigurator.initSelect=function(b,c){var a=DOM.scry(b,'.uiPillButton');a.each(function(d){Event.listen(d,'click',function(event){a.each(function(e){CSS.removeClass(e,'uiPillButtonSelected');});CSS.addClass(d,'uiPillButtonSelected');c.show(d.id.replace('button','snip'));});});};PluginConfigurator.initAppChooser=function(a){Selector.listen(a,'change',function(c){var b=Selector.getValue(a);['snip-html5','snip-xfbml','snip-iframe'].each(function(d){var f=DOM.scry($(d),'textarea');if(f.length>0)DOM.setContent(f[0],DOM.getText(f[0]).replace(/appId=\d+/,'appId='+b));var e=DOM.scry($(d),'.uiSelector');if(e.length>0)Selector.setSelected(e[0],b);});});};